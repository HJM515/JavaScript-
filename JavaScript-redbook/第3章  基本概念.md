# 第3章  基本概念

## 3.1  语法

(1) 区分大小写

​       html和css不区分大小写；JS区分大小写。

(2) 标识符

​       变量、函数、属性的名字。

​       第一个字符必须是一个字母、下划线、一个美元符号。

​       (字母包含ASCII或Unicode字母字符，汉字等都可以)

(3) 注释

​       //单行注释

​       /*

​       \* 多行

​       \* 注释

​       */

(4) 严格模式

​       方式1：代码的第一行，添加“use strict”

​       方式2：函数的第一行，添加“use strict”

​       问题：上线前代码打包会导致模式不按预期实现。

(5) 语句

​       以分号结尾，如果省略，则由解释器确定语句的结尾。

**注：a. 方法名称作为元素属性时，可不区分大小写；遇到带中划线的属性，后面跟的值应是小写。**

**b.** **严格模式一般只在某些特定的框架中使用。**

**c. JS****解释器在确定在哪里添加分号的规则：判断后面是否可以和前面的一起执行，如果可以就放到一起，不可以才加分号（某些框架函数为保证代码正常执行，会以分号开头，防止其他人的代码结尾未写分号）；“++”和“--”符号优先和下面的合并；return/break/continue不会与后面合并，直接返回，因此return的内容应该紧跟在return后。**

## 3.2  关键字和保留字

​       关键字和保留字不能作为标识符。

​       避免方式：驼峰命名方式、拼音

**注：a. java中所有关键字都是JS的保留字/关键字。**

## 3.3  变量

​       var 局部变量； 全局变量。

**注：a. 定义变量时，不会定义其类型，使用的时候才会取获取数据类型。**

​    **b.** **使用var局部变量，否则全局变量（全局属性）；使用var不可删除，否则可删除（属性可以delete）；使用var会被提前，否则不提前（对象的属性无序）。**

## 3.4  数据类型

​       基本数据类型：Undefined、Null、Boolean、Number、String (不可以改变数据类型)

​       复杂数据类型：Object (可变数据类型)（无序列表合集）

​       判断数据类型：typeof操作符

(1) Undefined类型（只有1个值）

​       本质：windows的属性，属性对应的值是未定义。

​       声明但未初始化，变量的值是undefined。

(2) Null类型（只有一个值）

​       表示空对象指针。 (typeof(null)) à “object”

null == undefined; 返回true

(3) Boolean类型

​       所有数据类型都可以转换成布尔值。Boolean(  )函数

​       undefined、null、NaN、0、-0、“ ”  à false

(4) Number类型

​        十进制、十六进制（0x）八进制（其一位是0）；

​       浮点数值的最高精度是17位小数。0.1+0.2不等于0.3。

​       NaN不等于NaN，isNaN()  判断传入的参数是否可以转换成数字；

​       类型转换：Number() 函数用于任何数据类型，parseInt()和parseFloat() 函数用于字符串转换成数值，建议始终将第二个参数设为10。

(5) String类型

​       JS中，建议使用单引号

​       类型转换：str.toString()方法 null和undefined没有这个方法、String(str)函数

(6) Object类型

​       类型转换：Object() 函数。

​       属性：constructor 保存用于创建当前对象的函数；

​                hasOwnProperty(*propertyName*) 检查给定属性是否灿在与当前对象实例；

​                isPrototypeOf(object) 检查传入对象是否是当前对象的原型；

​                propertyIsEnumerable(*propertyName*) 检查给定属性是否能使用for-in语句来枚举；

方法：toString()、valueof()、toLocalString()

**注：a. 使用typeof操作符判断数据类型，最好加上括号，如(typeof xxx)。**

**b. undefined****与null共同点：都只有一个值；布尔转换结果都为false；都没有属性和方法；**

**不同点：null是关键字，undefined不是；null是已经初始化的，而undefined不是；null是对象，而undefined只是一个数据类型；null转换成数字返回0，undefined返回NaN。**

   **c.** **声明变量时可以不给它赋值，如果一定要赋值可以赋成null，不要使用undefined;如果一定要用“===”检查每个值是否存在，使用undefined;当使用全等判断某个值是否为空，使用null;初学阶段可使用“== null”判断某个值是否存在或为空。**

   **d.0.1****和0.2无法转换成二进制，因此计算结果不等于0.3；这类问题可以通过乘以10的n次方再除以10的n次方避免。**

   **e. Number(****对象)，先调用对象的valueof()，再调用toString()方法; 如Number([])** **à** **0;Number({})** **à****NaN****。**

   **f. String(****对象)，先调用对象的toString()，再调用valueof()方法。**

**g. parseInt()****和parseFloat()的使用场景是后台传入数据或从HTML中获取数据的数值转换。parseInt(a, b), 按b进制解析a, 当b=0时,按十进制解析a; a的每一位的值不能大于b, 如parseInt(3,2)** **à****NaN**

**h** **对象分类：内部对象,共17种(错误对象、8种常用对象、Math/Gloal/JSON3种内置对象)；数组对象(JS语言运行环境中产生的对象，常用window/location对象)；自定义对象。**

**i. Object****类型转换：Object(Boolean/Number类型)** **à** **{ }   [[primitiveValue]]: value**

​                                       **Object(String****类型)** **à** **{“”}   [[primitiveValue]]****、length、0、1……**

​                                       **Object(null/undefined)** **à** **{}** **空对象**

**j.****对象属性访问(点方法或者方括号)JS解释器运行过程：判断前面是不是undefined或null，是则报错；判断是不是对象，如果不是则转换成对象；点方法将点后面的转换为字符串，如果是方括号先计算再将结果转换为字符串。**

## 3.5  操作符

(1) 一元运算符

​       递增++、递减--：前置，先改变后运算；后置，先运算后改变。

​       一元加+、减-：加与Number()转型函数一样，减先类型转换后取负数。

​       按位非（NOT）：”~num”，”-num-1”，其他位运算符很少用到。

​       逻辑非（！）

​       typeof、void 返回undefined,用于禁止跳转、delete

(2) 短路操作符

​       逻辑与（&&）：第一层，两个操作数为布尔值；

​                              第二层，两个操作数为可以转换成布尔值的表达式;(如果…并且…)；

​                              第三层，前面是判断语句，后面为执行语句。(判断并运行)

**第一个操作数可以转换false，返回第一个操作数；**

**第一个操作数可以转换true，返回第二个操作数。**

逻辑或（||）：第一层，两个操作数为布尔值；

​                            第二层，两个操作数为可以转换成布尔值的表达式;(如果…或者…)；

​                            第三层，前面是判断语句，后面为执行语句。(判断并运行)

​              **第一个操作数可以转换true，返回第一个操作数；**

**第一个操作数可以转换false，返回第二个操作数。**

**a && b || c**  **相当与 a ? b || c 相当于if(a) {b} else {c}**

(3) 加减乘除模 比较赋值

​       乘性操作符：先转换成数字，再进行运算。（小数需要进行处理）。

​       减法操作符：先转换成数字，再进行计算。

​       加法操作符：（倾向字符串）如果两边都是数字或布尔值，数字类型相加；如果有一个出现字符串，字符串类型相加。

​       关系运算符：（倾向数字）数字(布尔值)比较、字符串比较（编码）、对象比较（先调用valueof()，再调用toString（））、如果有一个是数字另一个也将转换为数值再比较。

​       相等操作符：“===” “！==”，全等/不等；“==” “！=”，数字(布尔值)比较、字符串比较（编码）、对象比较（一个对象调用valueof()，两个对象指向同一对象才相等）、null与undefined相等（null和undefined不转换类型）。

​       赋值运算符：“=”、“+=”、“-=”、“*=”、“/=”、“%=”，不推荐连续赋值。

​       其他二元运算符：instanceof、 in。

**注：a. 表达式:JS中的短语， JS代码中除操作符外，都是表达式。原始表达式（常量 不会改变的量如π/大写字母表示的量、变量、直接量 数字/字符串/正则表示式）、初始化表示式（初始化数字/对象，如对象字面量表达式）、函数表示式、函数调用表示式、属性访问表示式（点方法或括号）、对象创建表达式（new操作符构成的表达式）。**

**b.** **优先级，属性访问；一元运算符-+/++/--/! ；\*/ %+- ；<> <= >=；==/===；&&；||；三目运算；赋值**

**c.** **结合性：当优先级一样时，一元运算符右结合，三目运算符，赋值运算符右结合，其他都是左结合。**

**d.** **运算顺序：从左到右。**

**e.** **任何操作数与NaN比较，返回false。**

**f.** **！！a相当于Boolean(a)、+a相当于Number(a)、a + “”相当于String()。**

**g.** **加法操作JS解释器运行原理：如果有一个是字符串，都转换成字符串然后连起来；如果其中一个是null、undefined、布尔值、数字，都被转换成数字；如果其中一个是对象，（对象转换成原始值先valueof()再toString, Date对象直接调toString()**

**例1：空数组调用valueof()返回数组本身，调用toString()返回空字符串，因此[] + [] 得到“”；空对象调用valueof()返回对象本身，调用toString()返回“[object object]”，因此｛｝+｛｝得到“[object object] [object object]”。**

**例2：1+[1,2]****à****“11，2”；1+｛a:1｝****à****“1[object object]”；{a:1}+1****à****1** **前面的{}会被看做一段代码区域，不会参与到后面的计算；{}+[]****à****0****；[]+{}****à** **“[object object]”。**

## 3.6 语句 

(1) 基本语句

​       表达式语句：对操作数进行了增删改的表达式，包括递增递减、赋值、delete、函数调用语句。

​       复合语句：{多条语句}，又称为语句块。

​       空语句：一个分号“；”。用途1：复合语句结尾加分号，不会报错；用途2：模块开头加分号，防止压缩后与前面的代码合并导致错误；用途3：循环语句后面不需要执行可以直接使用“{}”或“；”。

​       声明语句：var 和 function。 声明的变量或函数都会提前，函数表达式不会被提前。

(2) 分支语句

​       if语句：if(expression){} else{}；条件判断中，建议基本数据类型比较，采用全等，避免类型转换。

​       switch语句：switch(expression){case value:  break; … ;default: statement} 。

(3) 循环语句

​       while语句：while(expression)statement；一般将在循环体的最后对表达式进行修改。

​       for语句：for(initialization; expression; post-loop-expression)statement。initialization只执行一次，可以放在外面，可在外访问。1243243……

​       for-in语句：for(property in expression) expression，枚举对象属性。

(4) 中断语句

​       break语句：跳出break所在的循环语句。

​       return语句：结束所在函数，返回一个结果。

​       continue语句：停止当前循环，继续下一个循环。(使用较少，break都可以实现)

**注：a. 语句是会触使某件事情发生的命令，作用是操作符使操作数进行计算的作用，副作用是当运行语句或表达式时，对某些变量的值进行修改、删除或增加等作用，递增递减、赋值都有副作用。语句一定有副作用，表达式不一定有副作用。**

   **b. while(true) statement** **和 for(;;)statement 一样，无限循环。expression最好直接是值的比较，直接转换为布尔值，优化性能。**

   **c. for-in****语句是更精准的循环语句，因此效率会更低（数据类型转换，in前面表达式的多次计算，原型链的搜索等操作）。**

**d. for-in****语句JS解释器过程：第一步，判断in后面的表达式是不是对象，如果是null/undefined直接报错（ES5中不报错不执行循环体），如果不是则将其转换为对象，然后执行下一步操作，将对象的属性取出来赋值给in前面的property（in前面的表达式每次都会运行），执行后面的循环体，完成后再继续赋值过程，直到属性枚举完成。**

**e. for-in****语句：数字、布尔类型，不会得到任何东西；字符串，会得到0：；1：；…。JS内置属性方法、原始值、string包装类的字符串长度、原始值都不可枚举。循环体内对属性的增删改不会反映到in前面的property中。**

**f.** **标签语句：label: statement。(使用较少，都可以使用函数封装实现) 将另一个循环写成标签语句，可以通过break label(跳转至label语句结尾)实现跳出两个嵌套循环体。**

**g.** **其他语句：with、debugger、use strict。** 